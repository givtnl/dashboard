{"version":3,"sources":["app.js","dashboard.js","environment.js","login.js","main.js","services.js","helpers/cookiemonster.js","helpers/messages.js","helpers/webapi.js","resources/index.js","/Users/lenniestockman/givtplatform/GivtPlatform/src/app.html","/Users/lenniestockman/givtplatform/GivtPlatform/src/css/dashboard.css","/Users/lenniestockman/givtplatform/GivtPlatform/src/dashboard.html","/Users/lenniestockman/givtplatform/GivtPlatform/src/css/login.css","/Users/lenniestockman/givtplatform/GivtPlatform/src/login.html","/Users/lenniestockman/givtplatform/GivtPlatform/src/css/style.css","/Users/lenniestockman/givtplatform/GivtPlatform/src/services.html"],"names":["App","inject","cookieMonster","configureRouter","config","router","title","getCookie","map","route","moduleId","name","DashBoard","WebApi","webapi","usercount","monthAmount","dayAmount","fetchMonthlyGivts","fetchDailyGivts","fetchUsers","date","Date","day","getUTCDay","lastSunday","lastSundayDate","getUTCMonth","getUTCDate","getUTCFullYear","DateBegin","DateEnd","params","console","log","getSecure","then","response","prop","Amount","bind","month","year","getFullYear","toFixed","debug","testing","Login","api","ea","stayLoggedIn","email","password","staylogged","legit","subscribe","loggedIn","msg","access_token","createCookie","expires_in","location","reload","error","document","getElementById","innerHTML","errorText","node","createElement","textNode","createTextNode","appendChild","className","id","login","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","setRoot","services","message","CookieMonster","value","days","expires","setTime","getTime","toGMTString","cookie","c_name","length","c_start","indexOf","c_end","substring","unescape","LoginEvent","url","eventAggr","bearer","oReq","XMLHttpRequest","open","setRequestHeader","JSON","parse","send","temp","resolve","reject","onreadystatechange","readyState","status","responseText","get","callback","onload","json","publish"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {CookieMonster} from './helpers/cookiemonster';\n\nexport class App {\n    static inject () {return [CookieMonster]}\n\n    constructor(cookieMonster){\n        this.cookieMonster = cookieMonster;\n    }\n\n    configureRouter(config, router){\n        config.title = 'Givt Platform';\n\n        if(!this.cookieMonster.getCookie(\"access_token\")){\n            config.map([\n                {route : '', moduleId: 'login', title: 'Login'}\n            ])\n        }else{\n            config.map([\n                {route : '', moduleId: 'dashboard', title: 'Dashboard'},\n                {route : 'services', moduleId: 'services', title: 'Diensten',name:'services'}\n\n            ])\n        }\n        this.router = router;\n\n    }\n}\n","import {WebApi} from './helpers/webapi';\n\n\nexport class DashBoard {\n    static inject() {\n        return [WebApi]\n    }\n\n\n\n    constructor(WebApi) {\n        this.webapi = WebApi;\n\n        this.usercount = 0;\n        this.monthAmount = 0;\n        this.dayAmount = 0;\n        this.fetchMonthlyGivts();\n        this.fetchDailyGivts();\n        this.fetchUsers();\n\n     //   setInterval(function(){\n      //      this.fetchGivts();\n    //      }.bind(this),3000);\n    }\n\n    fetchDailyGivts() {\n        var date = new Date();\n        var day = date.getUTCDay();\n        //var lastsunday = date.getUTCDate();\n        var lastSunday = new Date(date - day*1000*60*60*24);\n        var lastSundayDate = lastSunday.getUTCMonth()+1 + \"-\" + lastSunday.getUTCDate() + \"-\" + lastSunday.getUTCFullYear();\n        var DateBegin =  lastSundayDate + \" 00:00:00\";\n        var DateEnd = lastSundayDate + \" 23:59:59\";\n\n        var params = \"DateBegin=\" + DateBegin + \"&DateEnd=\" + DateEnd + \"&Status=\" + \"0\";\n        console.log(params);\n        this.webapi.getSecure(\"OrgAdminView/Givts/?\"+params)\n            .then(function (response){\n                this.dayAmount = 0;\n                for(var prop in response){\n                    this.dayAmount = response[prop].Amount + this.dayAmount;\n                }\n                //this.dayAmount = this.dayAmount.toFixed(2);\n            }.bind(this));\n    }\n\n    fetchMonthlyGivts() {\n        /* TODO\n            - Givts van deze maand\n            - Givts van deze dag\n            - Op bedragen rek. houden met CultureInfo!\n\n         */\n\n        var date = new Date();\n        var month = date.getUTCMonth()+1;\n        var year = date.getFullYear();\n\n        var DateBegin = month + \"-01-\" + year;\n        var DateEnd = month+1 + \"-01-\" + year;\n        var params = \"DateBegin=\" + DateBegin + \"&DateEnd=\" + DateEnd + \"&Status=\" + \"0\";\n        this.webapi.getSecure(\"OrgAdminView/Givts/?\"+params)\n            .then(function (response){\n                this.monthAmount = 0;\n                for(var prop in response){\n                    this.monthAmount = response[prop].Amount + this.monthAmount;\n                }\n                this.monthAmount = this.monthAmount.toFixed(2);\n            }.bind(this));\n    }\n\n    fetchUsers(){\n        /* TODO\n\n         - Unieke gevers van deze maand\n         - Unieke gevers van deze dag\n         */\n\n        this.webapi.getSecure(\"OrgAdminView/Users/\")\n            .then(function (response) {\n                this.usercount = response;\n            }.bind(this));\n    }\n}\n\n","export default {\n  debug: true,\n  testing: true\n};\n","import {WebApi} from './helpers/webapi';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {LoginEvent} from './helpers/messages';\nimport {CookieMonster} from './helpers/cookiemonster';\n\nexport class Login{\n    static  inject(){ return [WebApi, EventAggregator, CookieMonster]};\n    constructor(api, ea, cookieMonster){\n        this.stayLoggedIn = \"Blijf ingelogd\";\n        this.api = api;\n        this.email = \"debug@nfcollect.com\";\n        this.password = \"Test123\";\n        this.staylogged = false;\n        this.legit = false;\n        this.ea = ea;\n        this.cookieMonster = cookieMonster;\n\n        ea.subscribe(LoginEvent, msg =>\n        {\n            this.loggedIn(msg.msg)\n        });\n    }\n\n    loggedIn(msg){\n        if(msg.access_token){\n            this.cookieMonster.createCookie(\"access_token\", msg.access_token, msg.expires_in / 60 / 60 / 24);\n            location.reload();\n        }\n        else{\n            if(msg.error){\n                if(document.getElementById(\"loginError\"))\n                    document.getElementById(\"loginError\").innerHTML = \"\";\n                this.errorText = msg.error;\n                var node = document.createElement(\"span\");\n                var textNode = document.createTextNode(this.errorText);\n                node.appendChild(textNode);\n                node.className = \"error\";\n                node.id = \"loginError\";\n                document.getElementById(\"login\").appendChild(node);\n            }\n        }\n    }\n\n\n    login(){\n\n        this.api.login(this.email, this.password);\n    }\n}","import environment from './environment';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by lenniestockman on 02/11/16.\n */\nexport class services{\n    constructor(){\n        this.message = \"Hello World\";\n    }\n}","export class CookieMonster\n{\n    constructor(){\n\n    }\n\n    createCookie = function(name, value, days) {\n        var expires;\n        if (days) {\n            var date = new Date();\n            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n            expires = \"; expires=\" + date.toGMTString();\n        }\n        else {\n            expires = \"\";\n        }\n        document.cookie = name + \"=\" + value + expires + \"; path=/\";\n    }\n\n    getCookie(c_name) {\n        if (document.cookie.length > 0) {\n            var c_start = document.cookie.indexOf(c_name + \"=\");\n            if (c_start != -1) {\n                c_start = c_start + c_name.length + 1;\n                var c_end = document.cookie.indexOf(\";\", c_start);\n                if (c_end == -1) {\n                    c_end = document.cookie.length;\n                }\n                console.log(document.cookie.substring(c_start, c_end));\n                return unescape(document.cookie.substring(c_start, c_end));\n            }\n        }\n        return \"\";\n    }\n}","export class LoginEvent {\n    constructor(msg){\n        this.msg = msg;\n    }\n}","import {EventAggregator} from 'aurelia-event-aggregator';\nimport {LoginEvent} from './messages';\nimport {CookieMonster} from './cookiemonster';\n\nexport class WebApi{\n    static inject() {return [EventAggregator, CookieMonster]};\n\n    constructor(ea, cookieMonster){\n        this.ea = ea;\n        this.cookieMonster = cookieMonster;\n    };\n\n    getSecure(url, params){\n        var eventAggr = this.ea;\n        var bearer = this.cookieMonster.getCookie(\"access_token\");\n        var oReq = new XMLHttpRequest();\n        oReq.open(\"GET\", \"https://givtapidebug.azurewebsites.net/api/\" + url);\n        oReq.setRequestHeader(\"Content-type\",\"text/plain\");\n        oReq.setRequestHeader(\"Authorization\", \"Bearer \" + bearer);\n        if(params){\n            var params = JSON.parse(params);\n            oReq.send(params);\n\n        } else {\n            oReq.send(null);\n\n        }\n\n        var temp = 0;\n        return new Promise(function(resolve,reject){\n            oReq.onreadystatechange = function() {\n                if(oReq.readyState == 4 && oReq.status == 200) {\n                    temp = JSON.parse(oReq.responseText);\n                    resolve(temp);\n                }\n            }\n        });\n\n\n\n\n\n    }\n\n    get(url, params) {\n        var oReq = new XMLHttpRequest();\n        oReq.open(\"POST\", \"https://givtapidebug.azurewebsites.net/api/\" + url);\n        oReq.setRequestHeader(\"Content-type\",\"application/json\");\n        var params = JSON.parse(params);\n        return {\n            then : function(callback){\n                callback(27);\n            }\n        }\n        oReq.onreadystatechange = function() {\n            if(oReq.readyState == 4 && oReq.status == 200) {\n                return JSON.parse(oReq.responseText);\n            }\n        }\n        oReq.send(params);\n    }\n\n    login(email, password){\n        var oReq = new XMLHttpRequest();\n        var eventAggr = this.ea;\n        oReq.open(\"POST\", \"https://givtapidebug.azurewebsites.net/oauth2/token\");\n        oReq.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\n        var params = \"grant_type=password&userName=\"+email+\"&password=\"+password;\n        oReq.send(params);\n        oReq.onload = function() {\n            if(oReq.status >= 200 && oReq.status <300) {\n                var json = oReq.responseText;\n                if(json != \"\"){\n                    eventAggr.publish(new LoginEvent(JSON.parse(json)));\n                }\n            } else{\n                var json = oReq.responseText;\n                if(json != \"\"){\n                    eventAggr.publish(new LoginEvent(JSON.parse(json)));\n                }\n            }\n        }\n    }\n}","export function configure(config) {\n  //config.globalResources([]);\n}\n",null,null,null,null,null,null,null],"sourceRoot":"../src"}