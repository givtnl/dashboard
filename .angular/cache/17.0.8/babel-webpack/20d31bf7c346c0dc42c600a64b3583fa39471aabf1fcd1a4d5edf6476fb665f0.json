{"ast":null,"code":"\"use strict\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar core_1 = require(\"@angular/core\");\nvar common_1 = require(\"@angular/common\");\nvar domhandler_1 = require(\"../dom/domhandler\");\nvar Galleria = function () {\n  function Galleria(el, domHandler) {\n    this.el = el;\n    this.domHandler = domHandler;\n    this.panelWidth = 600;\n    this.panelHeight = 400;\n    this.frameWidth = 60;\n    this.frameHeight = 40;\n    this.activeIndex = 0;\n    this.showFilmstrip = true;\n    this.autoPlay = true;\n    this.transitionInterval = 4000;\n    this.showCaption = true;\n    this.onImageClicked = new core_1.EventEmitter();\n    this.stripLeft = 0;\n  }\n  Galleria.prototype.ngAfterViewChecked = function () {\n    if (this.imagesChanged) {\n      this.stopSlideshow();\n      this.render();\n      this.imagesChanged = false;\n    }\n  };\n  Object.defineProperty(Galleria.prototype, \"images\", {\n    get: function () {\n      return this._images;\n    },\n    set: function (value) {\n      this._images = value;\n      this.activeIndex = 0;\n      this.imagesChanged = true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Galleria.prototype.ngAfterViewInit = function () {\n    this.container = this.el.nativeElement.children[0];\n    this.panelWrapper = this.domHandler.findSingle(this.el.nativeElement, 'ul.ui-galleria-panel-wrapper');\n    this.initialized = true;\n    if (this.showFilmstrip) {\n      this.stripWrapper = this.domHandler.findSingle(this.container, 'div.ui-galleria-filmstrip-wrapper');\n      this.strip = this.domHandler.findSingle(this.stripWrapper, 'ul.ui-galleria-filmstrip');\n    }\n    if (this.images && this.images.length) {\n      this.render();\n    }\n  };\n  Galleria.prototype.render = function () {\n    this.panels = this.domHandler.find(this.panelWrapper, 'li.ui-galleria-panel');\n    if (this.showFilmstrip) {\n      this.frames = this.domHandler.find(this.strip, 'li.ui-galleria-frame');\n      this.stripWrapper.style.width = this.domHandler.width(this.panelWrapper) - 50 + 'px';\n      this.stripWrapper.style.height = this.frameHeight + 'px';\n    }\n    if (this.showCaption) {\n      this.caption = this.domHandler.findSingle(this.container, 'div.ui-galleria-caption');\n      this.caption.style.bottom = this.showFilmstrip ? this.domHandler.getOuterHeight(this.stripWrapper, true) + 'px' : 0 + 'px';\n      this.caption.style.width = this.domHandler.width(this.panelWrapper) + 'px';\n    }\n    if (this.autoPlay) {\n      this.startSlideshow();\n    }\n    this.container.style.visibility = 'visible';\n  };\n  Galleria.prototype.startSlideshow = function () {\n    var _this = this;\n    this.interval = setInterval(function () {\n      _this.next();\n    }, this.transitionInterval);\n    this.slideshowActive = true;\n  };\n  Galleria.prototype.stopSlideshow = function () {\n    if (this.interval) {\n      clearInterval(this.interval);\n    }\n    this.slideshowActive = false;\n  };\n  Galleria.prototype.clickNavRight = function () {\n    if (this.slideshowActive) {\n      this.stopSlideshow();\n    }\n    this.next();\n  };\n  Galleria.prototype.clickNavLeft = function () {\n    if (this.slideshowActive) {\n      this.stopSlideshow();\n    }\n    this.prev();\n  };\n  Galleria.prototype.frameClick = function (frame) {\n    if (this.slideshowActive) {\n      this.stopSlideshow();\n    }\n    this.select(this.domHandler.index(frame), false);\n  };\n  Galleria.prototype.prev = function () {\n    if (this.activeIndex !== 0) {\n      this.select(this.activeIndex - 1, true);\n    }\n  };\n  Galleria.prototype.next = function () {\n    if (this.activeIndex !== this.panels.length - 1) {\n      this.select(this.activeIndex + 1, true);\n    } else {\n      this.select(0, false);\n      this.stripLeft = 0;\n    }\n  };\n  Galleria.prototype.select = function (index, reposition) {\n    if (index !== this.activeIndex) {\n      var oldPanel = this.panels[this.activeIndex],\n        newPanel = this.panels[index];\n      this.domHandler.fadeIn(newPanel, 500);\n      if (this.showFilmstrip) {\n        var oldFrame = this.frames[this.activeIndex],\n          newFrame = this.frames[index];\n        if (reposition === undefined || reposition === true) {\n          var frameLeft = newFrame.offsetLeft,\n            stepFactor = this.frameWidth + parseInt(getComputedStyle(newFrame)['margin-right'], 10),\n            stripLeft = this.strip.offsetLeft,\n            frameViewportLeft = frameLeft + stripLeft,\n            frameViewportRight = frameViewportLeft + this.frameWidth;\n          if (frameViewportRight > this.domHandler.width(this.stripWrapper)) this.stripLeft -= stepFactor;else if (frameViewportLeft < 0) this.stripLeft += stepFactor;\n        }\n      }\n      this.activeIndex = index;\n    }\n  };\n  Galleria.prototype.clickImage = function (event, image, i) {\n    this.onImageClicked.emit({\n      originalEvent: event,\n      image: image,\n      index: i\n    });\n  };\n  Galleria.prototype.ngOnDestroy = function () {\n    this.stopSlideshow();\n  };\n  return Galleria;\n}();\n__decorate([core_1.Input(), __metadata(\"design:type\", Object)], Galleria.prototype, \"style\", void 0);\n__decorate([core_1.Input(), __metadata(\"design:type\", String)], Galleria.prototype, \"styleClass\", void 0);\n__decorate([core_1.Input(), __metadata(\"design:type\", Number)], Galleria.prototype, \"panelWidth\", void 0);\n__decorate([core_1.Input(), __metadata(\"design:type\", Number)], Galleria.prototype, \"panelHeight\", void 0);\n__decorate([core_1.Input(), __metadata(\"design:type\", Number)], Galleria.prototype, \"frameWidth\", void 0);\n__decorate([core_1.Input(), __metadata(\"design:type\", Number)], Galleria.prototype, \"frameHeight\", void 0);\n__decorate([core_1.Input(), __metadata(\"design:type\", Number)], Galleria.prototype, \"activeIndex\", void 0);\n__decorate([core_1.Input(), __metadata(\"design:type\", Boolean)], Galleria.prototype, \"showFilmstrip\", void 0);\n__decorate([core_1.Input(), __metadata(\"design:type\", Boolean)], Galleria.prototype, \"autoPlay\", void 0);\n__decorate([core_1.Input(), __metadata(\"design:type\", Number)], Galleria.prototype, \"transitionInterval\", void 0);\n__decorate([core_1.Input(), __metadata(\"design:type\", Boolean)], Galleria.prototype, \"showCaption\", void 0);\n__decorate([core_1.Output(), __metadata(\"design:type\", Object)], Galleria.prototype, \"onImageClicked\", void 0);\n__decorate([core_1.Input(), __metadata(\"design:type\", Array), __metadata(\"design:paramtypes\", [Array])], Galleria.prototype, \"images\", null);\nGalleria = __decorate([core_1.Component({\n  selector: 'p-galleria',\n  template: \"\\n        <div [ngClass]=\\\"{'ui-galleria ui-widget ui-widget-content ui-corner-all':true}\\\" [ngStyle]=\\\"style\\\" [class]=\\\"styleClass\\\" [style.width.px]=\\\"panelWidth\\\">\\n            <ul class=\\\"ui-galleria-panel-wrapper\\\" [style.width.px]=\\\"panelWidth\\\" [style.height.px]=\\\"panelHeight\\\">\\n                <li *ngFor=\\\"let image of images;let i=index\\\" class=\\\"ui-galleria-panel\\\" [ngClass]=\\\"{'ui-helper-hidden':i!=activeIndex}\\\"\\n                    [style.width.px]=\\\"panelWidth\\\" [style.height.px]=\\\"panelHeight\\\" (click)=\\\"clickImage($event,image,i)\\\">\\n                    <img class=\\\"ui-panel-images\\\" [src]=\\\"image.source\\\" [alt]=\\\"image.alt\\\" [title]=\\\"image.title\\\"/>\\n                </li>\\n            </ul>\\n            <div [ngClass]=\\\"{'ui-galleria-filmstrip-wrapper':true}\\\" *ngIf=\\\"showFilmstrip\\\">\\n                <ul class=\\\"ui-galleria-filmstrip\\\" style=\\\"transition:left 1s\\\" [style.left.px]=\\\"stripLeft\\\">\\n                    <li #frame *ngFor=\\\"let image of images;let i=index\\\" [ngClass]=\\\"{'ui-galleria-frame-active':i==activeIndex}\\\" class=\\\"ui-galleria-frame\\\" (click)=\\\"frameClick(frame)\\\"\\n                        [style.width.px]=\\\"frameWidth\\\" [style.height.px]=\\\"frameHeight\\\" [style.transition]=\\\"'opacity 0.75s ease'\\\">\\n                        <div class=\\\"ui-galleria-frame-content\\\">\\n                            <img [src]=\\\"image.source\\\" [alt]=\\\"image.alt\\\" [title]=\\\"image.title\\\" class=\\\"ui-galleria-frame-image\\\"\\n                                [style.width.px]=\\\"frameWidth\\\" [style.height.px]=\\\"frameHeight\\\">\\n                        </div>\\n                    </li>\\n                </ul>\\n            </div>\\n            <div class=\\\"ui-galleria-nav-prev fa fa-fw fa-chevron-circle-left\\\" (click)=\\\"clickNavLeft()\\\" [style.bottom.px]=\\\"frameHeight/2\\\" *ngIf=\\\"activeIndex !== 0\\\"></div>\\n            <div class=\\\"ui-galleria-nav-next fa fa-fw fa-chevron-circle-right\\\" (click)=\\\"clickNavRight()\\\" [style.bottom.px]=\\\"frameHeight/2\\\"></div>\\n            <div class=\\\"ui-galleria-caption\\\" *ngIf=\\\"showCaption&&images\\\" style=\\\"display:block\\\">\\n                <h4>{{images[activeIndex]?.title}}</h4><p>{{images[activeIndex]?.alt}}</p>\\n            </div>\\n        </div>\\n    \",\n  providers: [domhandler_1.DomHandler]\n}), __metadata(\"design:paramtypes\", [core_1.ElementRef, domhandler_1.DomHandler])], Galleria);\nexports.Galleria = Galleria;\nvar GalleriaModule = function () {\n  function GalleriaModule() {}\n  return GalleriaModule;\n}();\nGalleriaModule = __decorate([core_1.NgModule({\n  imports: [common_1.CommonModule],\n  exports: [Galleria],\n  declarations: [Galleria]\n})], GalleriaModule);\nexports.GalleriaModule = GalleriaModule;\n//# sourceMappingURL=galleria.js.map","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}