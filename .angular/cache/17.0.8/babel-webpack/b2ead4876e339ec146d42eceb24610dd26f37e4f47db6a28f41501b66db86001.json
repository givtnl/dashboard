{"ast":null,"code":"import { of } from 'rxjs/observable/of';\nimport 'rxjs/add/operator/switchMap';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ngx-translate/core\";\nimport * as i4 from \"../services/data.service\";\nconst _c0 = a0 => ({\n  \"show-loading-animation\": a0\n});\nexport class LoginComponent {\n  constructor(userService, router, translate, dataService, activatedRoute) {\n    this.userService = userService;\n    this.router = router;\n    this.translate = translate;\n    this.dataService = dataService;\n    this.activatedRoute = activatedRoute;\n    this.ShowLoadingAnimation = false;\n    this.passwordHidden = true;\n    this.eyeColor = \"#BCB9C9\";\n  }\n  ngOnInit() {\n    var access_token = this.activatedRoute.snapshot.queryParams.access_token;\n    var refresh_token = this.activatedRoute.snapshot.queryParams.refresh_token;\n    if (access_token !== null && refresh_token !== null) {\n      this.ShowLoadingAnimation = true;\n      this.userService.loginWithRefreshtoken(access_token, refresh_token).then(result => result ? this.router.navigate(['/dashboard']) : this.ShowLoadingAnimation = false).catch(result => this.ShowLoadingAnimation = false);\n    }\n    let is_safari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    if (is_safari) {\n      document.getElementById(\"pass-eye\").addEventListener(\"mousedown\", event => {\n        let hasFocus = $('#pass').is(':focus');\n        if (hasFocus) {\n          event.preventDefault(); //prevent dismissal of keyboard\n        }\n\n        ;\n      });\n    } else {\n      $('#pass-eye').click(event => {\n        event.preventDefault(); //prevent dismissal of keyboard\n        $('#pass').focus();\n      });\n    }\n  }\n  updateUserExtensionIfRequired() {\n    const currentLanguage = this.translate.getBrowserLang();\n    // get the current user\n    this.userService.getCurrentUser().switchMap(result => result.AppLanguage && result.AppLanguage.length > 0 ? of({}) : this.userService.patchLanguage(result.GUID, currentLanguage)).subscribe();\n  }\n  login() {\n    this.error_message = \"\";\n    if (!this.userName || !this.password) {\n      this.translate.get(\"Error_FillAllFieldsIn\").subscribe(value => {\n        this.error_message = value;\n      });\n      return;\n    }\n    this.ShowLoadingAnimation = true;\n    this.userService.login(this.userName, this.password).then(resp => {\n      this.ShowLoadingAnimation = false;\n      if (resp) {\n        if (this.userService.GivtOperations) this.router.navigate(['/mandate']);else {\n          this.updateUserExtensionIfRequired();\n          this.router.navigate(['/dashboard']);\n        }\n      } else {\n        this.router.navigate(['/unauthorized']);\n      }\n    }, error => {\n      this.ShowLoadingAnimation = false;\n      if (JSON.parse(error._body).error_description == \"LockedOut\") {\n        this.translate.get(\"Error_LockedOut\").subscribe(value => {\n          this.error_message = value;\n        });\n      } else {\n        this.translate.get(\"Error_WrongEmailOrPassword\").subscribe(value => {\n          this.error_message = value;\n        });\n      }\n    });\n  }\n  showPass() {\n    if (this.passwordHidden) {\n      this.passwordHidden = false;\n      document.getElementById(\"pass\").type = \"text\";\n      this.eyeColor = \"#41C98E\";\n    } else {\n      this.passwordHidden = true;\n      document.getElementById(\"pass\").type = \"password\";\n      this.eyeColor = \"#BCB9C9\";\n    }\n  }\n  forgotPW() {\n    this.router.navigate(['/forgotpassword'], {\n      queryParams: {\n        e: this.userName\n      }\n    });\n  }\n  static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.TranslateService), i0.ɵɵdirectiveInject(i4.DataService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"login\"]],\n    decls: 34,\n    vars: 19,\n    consts: [[\"viewBox\", \"654 217 135 53\", \"version\", \"1.1\", \"xmlns\", \"http://www.w3.org/2000/svg\", 0, \"xmlns\", \"xlink\", \"http://www.w3.org/1999/xlink\", 1, \"logo\"], [\"id\", \"Group\", \"stroke\", \"none\", \"stroke-width\", \"1\", \"fill\", \"none\", \"fill-rule\", \"evenodd\", \"transform\", \"translate(654.000000, 217.000000)\"], [\"id\", \"Rectangle-1-Copy-2\", \"fill\", \"#41C98E\", \"x\", \"48.7696335\", \"y\", \"0\", \"width\", \"55.8376963\", \"height\", \"7.92119565\"], [\"d\", \"M33.9267016,25.2038043 L44.5287958,25.2038043 L44.5287958,42.8091174 C39.6357755,48.3548784 33.5677321,51.1277174 24.91085,51.1277174 C17.665416,51.1277174 10.7888043,47.7562679 6.33537253,42.8091165 C1.88194075,37.861965 3.14732715e-16,31.3320422 0,25.3472285 C3.1121944e-16,19.3624148 2.13300314,12.533203 7.14364416,7.5611413 C12.1542852,2.58907964 17.865371,0 24.946136,0 C32.026901,0 38.1783704,2.36647462 44.5287958,7.5611413 L37.576866,15.7889457 C36.8296594,14.7828875 32.9532899,10.0815217 25.4450262,10.0815217 C21.8783809,10.0815217 18.2103674,11.3745765 15.3404228,14.2669777 C12.4704782,17.159379 10.6840603,20.6142076 10.6840603,25.3472278 C10.6840603,30.080248 12.4723009,33.9613176 15.1326604,36.5585261 C17.7930199,39.1557345 21.5855464,41.016317 24.6285618,41.0163156 C28.6829444,41.0163138 31.6151826,40.2752983 33.9267016,38.8858696 L33.9267016,25.2038043 Z\", \"id\", \"Path-Copy\", \"fill\", \"#2E2957\"], [\"id\", \"Path-Copy-2\", \"fill\", \"#2E2957\", \"points\", \"59.3717277 51.1277174 48.7696335 51.1277174 48.7696335 12.2418478 59.3717277 12.2418478\"], [\"d\", \"M119.451286,20.1630435 L119.451286,36.7255435 C119.451286,36.7255435 119.986395,41.7162815 124.752333,41.7663043 C127.096877,41.7909124 128.639767,40.1993295 129.235154,39.3683174 C129.701529,40.1993295 134.94546,44.5097849 134.94546,44.5097849 C132.152575,48.1120864 127.290001,50.9475144 122.342034,51.1277174 C118.495492,51.2678069 115.347945,49.8632256 112.731258,47.334204 C110.11457,44.8051824 108.806246,41.3588223 108.849191,36.7255435 L108.849191,0 L119.451286,0 L119.451286,12.2418478 L128.639767,12.2418478 L128.639767,20.1630435 L119.451286,20.1630435 Z\", \"id\", \"Path-Copy-4\", \"fill\", \"#2E2957\"], [\"id\", \"Givt\", \"fill\", \"#2E2957\", \"points\", \"79.091623 51.1277174 64.0366492 12.2418478 75.6282733 12.2418478 84.5340314 36.7255435 94.0052356 12.2418478 105.031414 12.2418478 89.9764398 51.1277174\"], [\"id\", \"login\", 1, \"white-bg\", \"login\", 2, \"position\", \"relative\"], [2, \"width\", \"100%\", \"height\", \"100%\", \"position\", \"absolute\", \"background\", \"rgba(255,255,255,0.7)\", \"display\", \"flex\", \"z-index\", \"1\", \"visibility\", \"hidden\", 3, \"ngClass\"], [1, \"loader\"], [\"viewBox\", \"25 25 50 50\", 1, \"circular\"], [\"cx\", \"50\", \"cy\", \"50\", \"r\", \"20\", \"fill\", \"none\", \"stroke-width\", \"5\", \"stroke-miterlimit\", \"10\", 1, \"path\"], [\"type\", \"email\", \"name\", \"email\", \"required\", \"\", 1, \"block\", \"input-full-width\", 3, \"ngModel\", \"ngModelChange\"], [1, \"password-box\"], [\"id\", \"pass\", \"type\", \"password\", \"name\", \"password\", \"required\", \"\", 1, \"block\", \"input-full-width\", 3, \"ngModel\", \"ngModelChange\"], [\"id\", \"pass-eye\", 1, \"pass-eye\", 3, \"click\"], [\"width\", \"16px\", \"height\", \"14px\", \"viewBox\", \"273 182 16 14\", \"version\", \"1.1\", \"xmlns\", \"http://www.w3.org/2000/svg\", 0, \"xmlns\", \"xlink\", \"http://www.w3.org/1999/xlink\"], [\"d\", \"M288.945312,187.8125 L288.90625,187.757812 C288.90625,187.757812 285.5,182.664062 281,182.664062 C276.5,182.664062 273.054688,187.8125 273.054688,187.8125 C272.984375,187.929688 272.984375,188.070312 273.054688,188.1875 C273.054688,188.1875 276.5,193.335938 281,193.335938 C285.5,193.335938 288.945312,188.1875 288.945312,188.1875 C289.015625,188.070312 289.015625,187.929688 288.945312,187.8125 L288.945312,187.8125 Z M281,191 C279.335938,191 278,189.664062 278,188 C278,186.351562 279.335938,185 281,185 C282.648438,185 284,186.351562 284,188 C284,189.664062 282.648438,191 281,191 L281,191 Z\", \"id\", \"eye\", \"stroke\", \"none\", \"fill-rule\", \"evenodd\"], [\"type\", \"submit\", 1, \"block\", \"input-full-width\", 3, \"click\"], [\"routerLinkActive\", \"active\", 1, \"forgot-pw\", 3, \"click\"], [\"id\", \"errorList\", 1, \"error\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"my-alert\");\n        i0.ɵɵelementStart(1, \"main\");\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(2, \"svg\", 0)(3, \"g\", 1);\n        i0.ɵɵelement(4, \"rect\", 2)(5, \"path\", 3)(6, \"polygon\", 4)(7, \"path\", 5)(8, \"polygon\", 6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(9, \"section\", 7)(10, \"div\", 8)(11, \"div\", 9);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(12, \"svg\", 10);\n        i0.ɵɵelement(13, \"circle\", 11);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(14, \"form\")(15, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_15_listener($event) {\n          return ctx.userName = $event;\n        });\n        i0.ɵɵpipe(16, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 13)(18, \"input\", 14);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_18_listener($event) {\n          return ctx.password = $event;\n        });\n        i0.ɵɵpipe(19, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"span\", 15);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_span_click_20_listener() {\n          return ctx.showPass();\n        });\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(21, \"svg\", 16)(22, \"desc\");\n        i0.ɵɵtext(23, \"Created with Sketch.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(24, \"defs\")(25, \"path\", 17);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(26, \"button\", 18);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_26_listener() {\n          return ctx.login();\n        });\n        i0.ɵɵtext(27);\n        i0.ɵɵpipe(28, \"translate\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(29, \"a\", 19);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_a_click_29_listener() {\n          return ctx.forgotPW();\n        });\n        i0.ɵɵtext(30);\n        i0.ɵɵpipe(31, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 20);\n        i0.ɵɵtext(33);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(17, _c0, ctx.ShowLoadingAnimation));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.userName);\n        i0.ɵɵattribute(\"placeholder\", i0.ɵɵpipeBind1(16, 9, \"Placeholder_Email\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.password);\n        i0.ɵɵattribute(\"placeholder\", i0.ɵɵpipeBind1(19, 11, \"Placeholder_Password\"));\n        i0.ɵɵadvance(7);\n        i0.ɵɵattribute(\"fill\", ctx.eyeColor);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(28, 13, \"Text_Login\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(31, 15, \"PW_ForgotPassword\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.error_message);\n      }\n    },\n    styles: [\"body[_ngcontent-%COMP%]{\\n    background-color: #F5F5F5;\\n}\\nmain[_ngcontent-%COMP%]{\\n    width: 100%;\\n    font-size: 1.2em;\\n    max-width: 500px;\\n    margin: 0 auto;\\n}\\n\\nsection[_ngcontent-%COMP%]{\\n    width: 100%;\\n\\n\\n}\\n\\n.login[_ngcontent-%COMP%]{\\n    background: #FFFFFF;\\n    border: 1px solid #E3E2E7;\\n    border-radius: 2px;\\n    margin:1em;\\n    box-sizing: border-box;\\n    width: auto;\\n}\\n\\n.password-box[_ngcontent-%COMP%]{\\n    display: flex;\\n    position: relative;\\n    margin-bottom: 26px;\\n}\\n\\n.pass-eye[_ngcontent-%COMP%]{\\n    position: absolute;\\n    top:0;\\n    right:11px;\\n    padding: 0 5px;\\n    display: flex;\\n    height: 100%;\\n}\\n.pass-eye[_ngcontent-%COMP%]:hover{\\n    cursor: pointer;\\n}\\n.password-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{\\n    align-self:center;\\n}\\n.logo[_ngcontent-%COMP%]{\\n    margin: 100px auto 0 auto;\\n    display: block;\\n    width: 200px;\\n    padding:26px;\\n}\\n\\nbutton[_ngcontent-%COMP%]{\\n    background: #41C98E;\\n    border: 1px solid #41C98E;\\n    font-family: 'Avenir_Black';\\n    font-size: 1em;\\n    color: #FFFFFF;\\n    text-align: center;\\n    padding:10px 0;\\n\\n}\\n\\nbutton[_ngcontent-%COMP%]:active{\\n    background: gray;\\n}\\nform[_ngcontent-%COMP%]{\\n    background:white;\\n    padding:38px 27px;\\n}\\n.block[_ngcontent-%COMP%]{\\n    display: block;\\n}\\n\\ninput[required][_ngcontent-%COMP%]{\\n    padding: 10px 0 10px 13px;\\n    background-color:white;\\n\\n}\\n\\ninput[_ngcontent-%COMP%]{\\n    border:1px solid #E0E0E6;\\n\\n    font-family: 'Avenir_Light';\\n    color:#2E2957;\\n    font-size: 1em;\\n    border-radius: 0;\\n    box-shadow: none !important;\\n\\n}\\n\\ninput[_ngcontent-%COMP%]::-webkit-input-placeholder { \\n\\n    color:    #BCB9C9;\\n}\\ninput[_ngcontent-%COMP%]:-moz-placeholder { \\n\\n    color:    #BCB9C9;\\n    opacity:  1;\\n}\\ninput[_ngcontent-%COMP%]::-moz-placeholder { \\n\\n    color:    #BCB9C9;\\n    opacity:  1;\\n}\\ninput[_ngcontent-%COMP%]:-ms-input-placeholder { \\n\\n    color:    #BCB9C9;\\n}\\n\\n.label--logged-in[_ngcontent-%COMP%]{\\n    background-color:white;\\n    margin-left: 15px;\\n    color: #BCB9C9;\\n    opacity:1;\\n    font-family: 'Avenir_Light';\\n    font-size: 1em;\\n    vertical-align: top;\\n}\\n\\ninput[type=checkbox][_ngcontent-%COMP%]:checked    + label[_ngcontent-%COMP%]{\\n    color:#2E2957;\\n}\\ninput[type=\\\"email\\\"][_ngcontent-%COMP%], input[type=\\\"password\\\"][_ngcontent-%COMP%]{\\n    -webkit-appearance: none;\\n}\\n\\n.input-full-width[_ngcontent-%COMP%]{\\n    width:100%;\\n    box-sizing: border-box;\\n}\\n\\n.error[_ngcontent-%COMP%]{\\n    font-size: 15px;\\n    margin-top: 20px;\\n    font-family: 'Avenir_Light';\\n    color: #D43D4C;\\n    text-align: center;\\n    display:block;\\n}\\n#errorList[_ngcontent-%COMP%]{\\n    max-width: 350px;\\n    margin: 0 auto;\\n}\\n\\ninput[type=\\\"email\\\"][_ngcontent-%COMP%]{\\n    margin-bottom: 26px;\\n}\\n\\nbutton[type=\\\"submit\\\"][_ngcontent-%COMP%]{\\n    margin-top:29px;\\n    cursor:pointer;\\n}\\n\\n@media only screen and (max-width: 500px) {\\n    main[_ngcontent-%COMP%]{\\n        height: 100%;\\n        background-color: #F5F5F5 !important;\\n    }\\n    .logo[_ngcontent-%COMP%] {\\n        width: 85px;\\n        height: 32px;\\n        margin: 0 auto;\\n        padding: 40px 0 30px 0;\\n    }\\n    .login[_ngcontent-%COMP%]{\\n        margin: 0 10px 10px 10px;\\n    }\\n    section[_ngcontent-%COMP%]{\\n        padding: 10px;\\n    }\\n    input[type=\\\"email\\\"][_ngcontent-%COMP%]{\\n        margin-bottom: 10px;\\n    }\\n    .password-box[_ngcontent-%COMP%]{\\n        margin-bottom: 20px;\\n    }\\n    button[type=\\\"submit\\\"][_ngcontent-%COMP%]{\\n        margin-top:20px;\\n    }\\n\\n\\n}\\n\\n.forgot-pw[_ngcontent-%COMP%]{\\n    font-size: 17px;\\n    font-family: Avenir_Light;\\n    color: #2E2957;\\n    text-decoration: none;\\n    margin: 30px 0;\\n    display: block;\\n    text-align: center;\\n    cursor:pointer;\\n}\\n\\n.forgot-pw[_ngcontent-%COMP%]:hover{\\n    color: #0b0b30;\\n    text-decoration: underline;\\n}\\n\\n.show-loading-animation[_ngcontent-%COMP%] {\\n    visibility: visible !important;\\n    transition: visibility 0.5s linear;\\n}\"]\n  });\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}