<!-- <link href="/dist/css/bootstrap/tabulator_bootstrap4.min.css" rel="stylesheet"> -->

<div class="global-layout">
    <my-navigation></my-navigation>
    <div class="global-layout-content">
        <my-titlebar></my-titlebar>
        <div class="global-layout-main container">
            <h2>Geen gezeur meer met je eigen CSV te uploaden!</h2>
            <div id="tabulator-div">
                <form class="roster-form" [formGroup]="form">
                    <div class="items roster-body col-md-12" formArrayName="collects">
                        <div class="roster-header row">
                            <div class="header-title col-md-3">StartDate</div>
                            <div class="header-title col-md-3">EndDate</div>
                            <div class="header-title col-md-4">Name</div>
                            <div class="header-title col-md-1">CollectId</div>
                            <div class="header-title-control col-md-1"></div>
                        </div>
                        <div class="roster-row row"
                            [class.invalid-row]="control.errors?.invalidDate || control.errors?.overlap" *ngFor="let control of form.get('collects').controls; 
                                let i = index" [formGroupName]="i">

                            <input class="col-md-3" type="datetime-local" formControlName="dtBegin" />
                            <input class="col-md-3" type="datetime-local" formControlName="dtEnd" />
                            <input class="col-md-4" type="text" formControlName="Name" />
                            <input class="col-md-1" type="number" formControlName="CollectId" min="1" max="3"
                                step="1" />
                            <div class="col-md-1 row-control remove">
                                <i [class.hidden]="form.get('collects').controls.length == 1" class="fa fa-times"
                                    (click)="removeRow(i)"></i>
                                <i class="fa fa-copy" (click)="copyRow(i)"></i>
                                <i class="fa fa-plus" (click)="addEmptyRow(i)"></i>
                            </div>
                        </div>
                        <div class="roster-controls">
                            <button (click)="addEmptyRow()"><i class="fa fa-plus"></i>Toevoegen</button>
                            <div class="roster-messages row" *ngIf="hasOverlapErrors" class="roster-footer row">
                                Der is een overlappingske i joen liste me toewizingn
                            </div>
                            <div class="roster-messages row" *ngIf="isSuccessfulAllocations" class="roster-footer row">
                                Tis gelukt
                            </div>
                            <!-- <button (click)="upload()"><i class="fa fa-check"></i>Opslaan</button> -->
                        </div>
                        <div class="roster-controls row" style='margin-top:20px;'>

                            <a routerLink="/assign">
                                Terug naar kalender
                            </a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <my-footer></my-footer>
    </div>
</div>
